<script>

var senha = prompt("Digite sua senha:");

if (senha !== "Rudnei2026") {
    alert("Senha incorreta.");
} else {

    navigator.geolocation.getCurrentPosition(function(position) {

        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var coordenadas = latitude + "," + longitude;

        fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat="
            + latitude + "&lon=" + longitude + "&addressdetails=1", {
            headers: {
                "Accept": "application/json"
            }
        })
        .then(response => response.json())
        .then(data => {

            console.log(data); // para debug

            var rua =
                (data.address && (
                    data.address.road ||
                    data.address.pedestrian ||
                    data.address.residential ||
                    data.address.neighbourhood ||
                    data.address.suburb
                )) || "Endereço não identificado";

            var url = "https://form.jotform.com/260504743750050"
                + "?nomeACS=Rudnei+Rafael+de+Oliveira"
                + "&locationCoordinates=" + encodeURIComponent(coordenadas)
                + "&ruaAuto=" + encodeURIComponent(rua);

            window.location.href = url;

        })
        .catch(error => {
            alert("Erro ao buscar endereço.");
            console.log(error);
        });

    });

}

</script>
